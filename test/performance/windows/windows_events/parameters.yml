receivers: ["logs"]

test_case: "logs_windows_events_performance"
validate_type: "performance"
data_type: "logs"
# Number of logs being written
number_monitored_logs: 100
# Number of metrics to be sent or number of log lines being written  each minute
values_per_minute: "<values_per_minute>"
# Number of seconds the agent should run and collect the metrics. In this case, 5 minutes
agent_collection_period: 300

commit_hash: <commit_hash>
commit_date: <commit_date>

os_family: "<os_family>"
cloudwatch_agent_config: "<cloudwatch_agent_config>"

# Metric that the test needs to validate; moreover, the stress validation already has
# InstanceID dimension; therefore, does not need to validate it
# https://github.com/aws/amazon-cloudwatch-agent-test/pull/109/files#diff-47c87373e751dd9fd5ce504e44b320765c8b84d6cde524a4e8a32cfa34674165R124-R135
metric_namespace: "CloudWatchAgentPerformance"
metric_validation:
  - metric_name: "procstat cpu_usage"
    metric_sample_count: 300
    metric_dimension:
      - name: "exe"
        value: "amazon-cloudwatch-agent.exe"
      - name: "process_name"
        value: "amazon-cloudwatch-agent.exe"
  - metric_name: "procstat memory_rss"
    metric_sample_count: 300
    metric_dimension:
      - name: "exe"
        value: "amazon-cloudwatch-agent.exe"
      - name: "process_name"
        value: "amazon-cloudwatch-agent.exe"
  - metric_name: "procstat memory_vms"
    metric_sample_count: 300
    metric_dimension:
      - name: "exe"
        value: "amazon-cloudwatch-agent.exe"
      - name: "process_name"
        value: "amazon-cloudwatch-agent.exe"
  - metric_name: "procstat write_bytes"
    metric_sample_count: 300
    metric_dimension:
      - name: "exe"
        value: "amazon-cloudwatch-agent.exe"
      - name: "process_name"
        value: "amazon-cloudwatch-agent.exe"

  # Validations for Network Interface
  - metric_name: "Bytes_Sent_Per_Sec"
    metric_dimension:
      - name: "objectname"
        value: "Network Interface"
      - name: "instance"
        value: "Amazon Elastic Network Adapter"
  - metric_name: "Packets_Sent_Per_Sec"
    metric_dimension:
      - name: "objectname"
        value: "Network Interface"
      - name: "instance"
        value: "Amazon Elastic Network Adapter"
  # Validate Memory metrics
  - metric_name: "Available_Bytes"
    metric_sample_count: 60
    metric_dimension:
      - name: "objectname"
        value: "Memory"

log_validation:
  - log_value: "Security Informational log"
    log_level: "Information"
    log_lines: 1
    log_stream: "Security"
    log_source: "WindowsEvents"
  - log_value: "Security Warning log"
    log_level: "Warning"
    log_lines: 1
    log_stream: "Security"
    log_source: "WindowsEvents"
  - log_value: "Security Error log"
    log_level: "Error"
    log_lines: 1
    log_stream: "Security"
    log_source: "WindowsEvents"
  - log_value: "Security Critical log"
    log_level: "Critical"
    log_lines: 1
    log_stream: "Security"
    log_source: "WindowsEvents"
  - log_value: "System information log"
    log_level: "Information"
    log_lines: 1
    log_stream: "System"
    log_source: "WindowsEvents"
  - log_value: "System warning log"
    log_level: "Warning"
    log_lines: 1
    log_stream: "System"
    log_source: "WindowsEvents"
  - log_value: "System error log"
    log_level: "Error"
    log_lines: 1
    log_stream: "System"
    log_source: "WindowsEvents"
  - log_value: "System Critical log"
    log_level: "Critical"
    log_lines: 1
    log_stream: "System"
    log_source: "WindowsEvents"
  - log_value: "Application information log"
    log_level: "Information"
    log_lines: 1
    log_stream: "Application"
    log_source: "WindowsEvents"
  - log_value: "Application warning log"
    log_level: "Warning"
    log_lines: 1
    log_stream: "Application"
    log_source: "WindowsEvents"
  - log_value: "Application error log"
    log_level: "Error"
    log_lines: 1
    log_stream: "Application"
    log_source: "WindowsEvents"
  - log_value: "Application critical log"
    log_level: "Critical"
    log_lines: 1
    log_stream: "Application"
    log_source: "WindowsEvents"